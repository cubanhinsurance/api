{"openapi":"3.0.0","info":{"title":"Who fix services","description":"","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}}},"paths":{"/auth/signin":{"post":{"operationId":"AuthController_signin","summary":"Autenticar usuario","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}},"required":["username","password"],"additionalProperties":false}}}},"responses":{"201":{"description":"Correcto","content":{"application/json":{"schema":{"type":"object","properties":{"access_token":{"type":"string"}}}}}},"401":{"description":"Fallo"}}}},"/auth/signin/agent":{"post":{"operationId":"AuthController_signinAgent","summary":"Autenticar agente","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}},"required":["username","password"],"additionalProperties":false}}}},"responses":{"201":{"description":"Correcto","content":{"application/json":{"schema":{"type":"object","properties":{"access_token":{"type":"string"}}}}}},"401":{"description":"Fallo"}}}},"/auth/signin/tech":{"post":{"operationId":"AuthController_signinTechnichian","summary":"Autenticar tecnico","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}},"required":["username","password"],"additionalProperties":false}}}},"responses":{"201":{"description":"Correcto","content":{"application/json":{"schema":{"type":"object","properties":{"access_token":{"type":"string"}}}}}},"401":{"description":"Fallo"}}}},"/users":{"get":{"operationId":"UsersController_getUsersList","summary":"Devuelve listado de usuarios del sistema","parameters":[{"name":"page","required":true,"in":"query","schema":{"type":"number"}},{"name":"page_size","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"page":{"type":"integer","minimum":1,"description":"Pagina actual"},"page_size":{"type":"integer","description":"Tama√±o de pagina"},"total":{"type":"integer","description":"Total de elementos"},"pages":{"type":"integer","description":"Total de paginas"},"prev_page":{"type":"integer","description":"Pagina anterior"},"next_page":{"type":"integer","description":"Pagina siguiente"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"number","format":"float"},"name":{"type":"string"},"lastname":{"type":"string"},"username":{"type":"string"},"email":{"type":"string","format":"email"},"phone_number":{"type":"string"},"telegram_id":{"type":"string"},"active":{"type":"boolean"},"expiration_date":{"type":"string","format":"date-time"},"photo":{"type":"string"},"techniccian_info":{"type":"object","properties":{"user":{"type":"number","format":"float"},"expiration_date":{"type":"string","format":"date-time"},"active":{"type":"boolean"},"habilities":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"id":{"type":"number","format":"float"},"group":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"}},"required":["name"],"additionalProperties":false},"requirements":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"}},"required":["name"],"additionalProperties":false}}},"required":["name"],"additionalProperties":false}}},"additionalProperties":false},"agent_info":{"type":"object","properties":{"user":{"type":"number","format":"float"},"expiration_date":{"type":"string","format":"date-time"},"active":{"type":"boolean"}},"additionalProperties":false}},"additionalProperties":false}}},"additionalProperties":false}}}}}}},"/users/user":{"post":{"operationId":"UsersController_createUser","summary":"Crear un nuevo usuario","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string","pattern":"^[a-zA-Z0-9_]{4,}$"},"password":{"type":"string","pattern":"(?=.*[A-Z])(?=.*[0-9])(?=.*[a-z]).{8}"},"name":{"type":"string"},"lastname":{"type":"string"},"email":{"type":"string","format":"email"},"telegram_id":{"type":"string"}},"required":["username","password","name","lastname"],"additionalProperties":false}}}},"responses":{"201":{"description":"Usuario creado con exito"},"400":{"description":"Parametros de entrada incorrectos"},"409":{"description":"Usuario ya existe"}}}},"/users/user/{username}":{"put":{"operationId":"UsersController_updateUser","summary":"Actualizar datos de un usuario","parameters":[{"name":"username","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"last_password":{"type":"string","pattern":"(?=.*[A-Z])(?=.*[0-9])(?=.*[a-z]).{8}"},"new_password":{"type":"string","pattern":"(?=.*[A-Z])(?=.*[0-9])(?=.*[a-z]).{8}"},"confirm_password":{},"name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string","format":"email"},"telegram_id":{"type":"string"},"active":{"type":"boolean"},"expiration_date":{"type":"string","format":"date-time","nullable":true}},"additionalProperties":false}}}},"responses":{"200":{"description":"Usuario actualizado satisfactoriamente"},"400":{"description":""},"403":{"description":"Las credenciales no coinciden"},"404":{"description":"Usuario no existe"}}}},"/users/agent":{"post":{"operationId":"UsersController_createAgent","summary":"Crear un nuevo agente","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"new_user":{"type":"object","properties":{"username":{"type":"string","pattern":"^[a-zA-Z0-9_]{4,}$"},"password":{"type":"string","pattern":"(?=.*[A-Z])(?=.*[0-9])(?=.*[a-z]).{8}"},"name":{"type":"string"},"lastname":{"type":"string"},"email":{"type":"string","format":"email"},"telegram_id":{"type":"string"}},"required":["username","password","name","lastname"],"additionalProperties":false},"username":{"type":"string"},"role":{"type":"integer"},"expiration_date":{"type":"string","format":"date-time"}},"required":["role"],"additionalProperties":false}}}},"responses":{"201":{"description":"Agente creado con exito"},"400":{"description":"Parametros de entrada incorrectos"},"409":{"description":"Agente ya existe"}}}},"/users/agent/{agent}":{"put":{"operationId":"UsersController_updateAgent","summary":"Actualizar datos de un agente","parameters":[{"name":"agent","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"role":{"type":"integer"},"active":{"type":"boolean"},"expiration_date":{"type":"string","format":"date-time","nullable":true}},"additionalProperties":false}}}},"responses":{"200":{"description":"Usuario actualizado satisfactoriamente"},"400":{"description":""},"404":{"description":"Usuario no existe"}}}},"/users/tech":{"post":{"operationId":"UsersController_createTech","summary":"Crear un nuevo tecnico","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"new_user":{"type":"object","properties":{"username":{"type":"string","pattern":"^[a-zA-Z0-9_]{4,}$"},"password":{"type":"string","pattern":"(?=.*[A-Z])(?=.*[0-9])(?=.*[a-z]).{8}"},"name":{"type":"string"},"lastname":{"type":"string"},"email":{"type":"string","format":"email"},"telegram_id":{"type":"string"}},"required":["username","password","name","lastname"],"additionalProperties":false},"username":{"type":"string"},"expiration_date":{"type":"string","format":"date-time"},"habilities":{"type":"array","items":{"type":"number","format":"float"},"minItems":1}},"required":["habilities"],"additionalProperties":false}}}},"responses":{"201":{"description":"Tenico creado con exito"},"400":{"description":"Parametros de entrada incorrectos"},"409":{"description":"Tenico ya existe"}}}},"/users/tech/{tech}":{"put":{"operationId":"UsersController_updateTech","summary":"Actualizar datos de un tecnico","parameters":[{"name":"tech","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"active":{"type":"boolean"},"expiration_date":{"type":"string","format":"date-time","nullable":true},"habilities":{"type":"array","items":{"type":"number","format":"float"},"minItems":0}},"additionalProperties":false}}}},"responses":{"200":{"description":"Tecnico actualizado satisfactoriamente"},"400":{"description":""},"404":{"description":"Usuario no existe"}}}},"/roles":{"get":{"operationId":"RolesController_getRolesList","summary":"Devuelve el listado de roles","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"number","format":"float"},"name":{"type":"string"},"root":{"type":"boolean","description":"Define si es un rol administrativo"},"description":{"type":"string"},"functionalities":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Nombre"},"description":{"type":"string","description":"Descripcion"},"id":{"type":"number","format":"float"}},"required":["name","id"],"additionalProperties":false}}},"required":["id","name"],"additionalProperties":false}}}}}}},"post":{"operationId":"RolesController_createRole","summary":"Crea un nuevo rol","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"functionalities":{"type":"array","items":{"type":"string"}}},"required":["name"],"additionalProperties":false}}}},"responses":{"201":{"description":""}}}},"/roles/{role}/{functionalities}":{"post":{"operationId":"RolesController_addFunctionality2Role","summary":"Adiciona funcionalidades a un rol","parameters":[{"name":"role","required":true,"in":"path","schema":{"type":"number"}},{"name":"functionalities","required":true,"in":"path","description":"Funcionalidad o listado de funcionalidades separadas por coma","schema":{"type":"string"}}],"responses":{"201":{"description":""}}},"delete":{"operationId":"RolesController_removeFunctionality2Role","summary":"Elimina funcionalidades a un rol","parameters":[{"name":"role","required":true,"in":"path","schema":{"type":"number"}},{"name":"functionalities","required":true,"in":"path","description":"Funcionalidad o listado de funcionalidades separadas por coma","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/roles/{role}":{"put":{"operationId":"RolesController_updateRole","summary":"Actualiza los datos de un rol","parameters":[{"name":"role","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"functionalities":{"type":"array","items":{"type":"string"}}},"additionalProperties":false}}}},"responses":{"200":{"description":""}}}},"/functionalities":{"get":{"operationId":"FunctionalitiesController_getFunctionalities","summary":"Devuelve el listado de funcionalidades del sistema","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Nombre"},"description":{"type":"string","description":"Descripcion"},"id":{"type":"number","format":"float"}},"required":["name","id"],"additionalProperties":false}}}}}}}},"/enums/provinces":{"get":{"operationId":"EnumsController_getProvinces","summary":"Devuelve el listado de provincias","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"},"short_name":{"type":"string"},"code":{"type":"string"}},"required":["name","id","code"],"additionalProperties":false}}}}}}}},"/enums/municipalities/{provinces}":{"get":{"operationId":"EnumsController_getMunicipalities","summary":"Devuelve el listado de municipios de una provincia","parameters":[{"name":"provinces","required":true,"in":"path","description":"Listado de ids separados por coma ex: 1|1,2,3","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"},"short_name":{"type":"string"},"code":{"type":"string"},"province":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"},"short_name":{"type":"string"},"code":{"type":"string"}},"required":["name","id","code"],"additionalProperties":false}},"required":["name","id","code"],"additionalProperties":false}}}}}}}},"/enums/habilities":{"get":{"operationId":"EnumsController_getHabilitiesGroups","summary":"Devuelve listado de grupos de habilidades con sus habilidades","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"},"habilities":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"id":{"type":"number","format":"float"},"group":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"}},"required":["name"],"additionalProperties":false},"requirements":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"}},"required":["name"],"additionalProperties":false}}},"required":["name"],"additionalProperties":false}}},"required":["name"],"additionalProperties":false}}}}}}},"post":{"operationId":"EnumsController_createHabilitiesGroup","summary":"Crea grupos de competencias","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"],"additionalProperties":false}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"}},"required":["name"],"additionalProperties":false}}}}}}},"/enums/habilities/{group}":{"put":{"operationId":"EnumsController_updateHabilityGroup","parameters":[],"responses":{"200":{"description":""}}},"post":{"operationId":"EnumsController_createHabilities","summary":"Crea competencias en un grupo","parameters":[{"name":"group","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"requirements":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"],"additionalProperties":false}}},"required":["name"],"additionalProperties":false}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"id":{"type":"number","format":"float"},"group":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"}},"required":["name"],"additionalProperties":false},"requirements":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"id":{"type":"number","format":"float"}},"required":["name"],"additionalProperties":false}}},"required":["name"],"additionalProperties":false}}}}}}}}}